#!/usr/bin/env node

var docopt = require('docopt').docopt,
    pkg = require('../package.json'),
    config = require('../config.json'),
    server = require('../lib/server');


// Usage text
var doc = "I feel lucky, for The Pirate Bay   \n\
\n\
Usage:   \n\
    aaargh [--host=HOST] [--port=PORT] [--source=URL]   \n\
\n\
Options:   \n\
    --host=HOST       Set server host   \n\
    --port=PORT       Set server port   \n\
    --source=URL      Set The Pirate Bay URL   \n\
    -h --help         Show this screen   \n\
    -v --version      Show version   \n\
";

var cli = docopt(doc, { version: pkg.version });

// Load config
var port = cli['--port'] || config.server.port,
    host = cli['--host'] || config.server.host,
    source = cli['--source'] || config.tpb.url;

// Set TPB URL
server.setTPB(source);

// Start HTTP server
server.start(port, host);
